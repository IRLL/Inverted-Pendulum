{"name":"Inverted-pendulum","tagline":"","body":"#Inverted Pendulum Documentation\r\n###Introduction\r\nThis is the start of documentation for The Inverted Pendulum Project.\r\nThe project is based on Feedback's Digital Pendulum system that was\r\npreviously modified by the WSU Bioengineering Department. For more information\r\non the system go to [Feedback Instruments](http://www.feedback-instruments.com/products/education/control_instrumentation/digital_pendulum) website.\r\n      <hr/>\r\n      <h3>I. Change Notifications</h3>\r\n      <p>CN CONFIGURATION AND OPERATION (Done in the setupChangeNotification function)</p>\r\n      <p>The CN pins are configured as follows:</p>\r\n      <ol>\r\n          <li>Disable CPU interrupts</li>\r\n          <li>Set desired CN I/O pin as input by setting corresponding TRISx register bits = 1.</li>\r\n          <li>Enable the CN Module ON bit (CNCON<15>) = 1.</li>\r\n          <li>Enable individual CN input pin(s), enable optional pull up(s) or pull down(s).</li>\r\n          <li>Read corresponding PORTx registers to clear mismatch condition on CN input pins.</li>\r\n          <li>Configure the CN interrupt priority bits, CNIP<2:0> (IPC6<20:18>), and subpriority bits CNIS<1:0> (IPC6<17:16>).</li>\r\n          <li>Clear the CN interrupt flag bit, CNIF(IFS1<0>) = 0.</li>\r\n          <li>Enable the CN interrupt enable bit, CNIE (IEC1<0>) = 1.</li>\r\n          <li>Enable CPU interrupts.</li>\r\n      </ol>\r\n      <blockquote>\r\n          When a CN interrupt occurs, the user should read the PORTx register associated with the CN pin(s).\r\n          This will clear the mismatch condition and set up the CN logic to detect the next pin change.\r\n          The current PORTx value can be compared to the PORTx read value obtained at the last CN interrupt\r\n          or during initialization, and used to determine which pin changed.The CN pins have a minimum input\r\n          pulse-width specification. Refer to the <strong>Electrical Characteristics</strong> chapter of the specific device\r\n          data sheet to learn more.\r\n      </blockquote>\r\n      <hr/>\r\n      <h3>II. UART Channels</h3>\r\n      <p>The channels are configured as follows: </p>\r\n      <table border=\"1\" cellpadding=\"1\">\r\n          <thead>\r\n              <tr>\r\n                  <th>Channel</th>\r\n                  <th>Function</th>\r\n              </tr>\r\n          </thead>\r\n          <tbody>\r\n              <tr>\r\n                  <td>UART1</td>\r\n                  <td>Used to communicate with the controlling computer</td>\r\n              </tr>\r\n              <tr>\r\n                  <td>UART2</td>\r\n                  <td>Used to send commands to the Motor Controller</td>\r\n              </tr>\r\n          </tbody>\r\n      </table>\r\n      <hr/>\r\n      <h3>III. Motor Controller (Pololu Simple Motor Controller 24v23)</h3>\r\n      <p>\r\n          The user manual for the motor controller can be found at \r\n          <a href=\"https://www.pololu.com/docs/0J44\">https://www.pololu.com/docs/0J44/1.3</a>.\r\n          The following table shows the commands that control the motor and their\r\n         function.\r\n      </p>\r\n      <table border=\"1\" cellspacing=\"1\" cellpadding=\"1\">\r\n          <thead>\r\n              <tr>\r\n                  <th>Command</th>\r\n                  <th>Hex Value</th>\r\n                  <th>Function</th>\r\n              </tr>\r\n          </thead>\r\n          <tbody>\r\n              <tr>\r\n                  <td>Safe Start</td>\r\n                  <td>0x83</td>\r\n                  <td>\r\n                      Clears the Controller's Safe to start bit that is set on all\r\n                      errors\r\n                  </td>\r\n              </tr>\r\n              <tr>\r\n                  <td>Motor Forward</td>\r\n                  <td>0x85</td>\r\n                  <td>Sets the motor at the specified speed in the \"forward\" direction</td>\r\n              </tr>\r\n              <tr>\r\n                  <td>Motor Reverse</td>\r\n                  <td>0x86</td>\r\n                  <td>\r\n                      Sets the motor at the specified speed in the \"reverse\"\r\n                      direction\r\n                  </td>\r\n              </tr>\r\n              <tr>\r\n                  <td>Motor Brake</td>\r\n                  <td>0x92</td>\r\n                  <td>Brakes the motor at the specified deceleration</td>\r\n              </tr>\r\n              <tr>\r\n                  <td>Get Variable</td>\r\n                  <td>0xA1</td>\r\n                  <td>Gets the specified variable from the motor controller</td>\r\n              </tr>\r\n              <tr>\r\n                  <td>Set Limit</td>\r\n                  <td>0xA2</td>\r\n                  <td>Sets the max speed the motor can rotate at</td>\r\n              </tr>\r\n              <tr>\r\n                  <td>Get Firmware Version</td>\r\n                  <td>0xC2</td>\r\n                  <td>Gets the Controller's firmware version</td>\r\n              </tr>\r\n              <tr>\r\n                  <td>Stop Motor</td>\r\n                  <td>0xE0</td>\r\n                  <td>Stops the Motor until the motor has met Safe-Start conditions</td>\r\n              </tr>\r\n          </tbody>\r\n      </table>\r\n      <hr/>\r\n      <h3>IV. Encoders</h3>\r\n      <h5>X1 Encoding</h5>\r\n      <p>\r\n         The figure below shows a quadrature cycle and the resulting increments and\r\n         decrements for X1 encoding. When channel A leads channel B, the\r\n         increment occurs on the rising edge of channel A. When channel B\r\n         leads channel A, the decrement occurs on the falling edge of channel A.\r\n      </p>\r\n      <img src=\"images/x1encoding.jpg\" alt=\"X1 Encoding\"/>\r\n      <h5>X2 Encoding</h5>\r\n      <p>\r\n          The same behavior holds for X2 encoding except the counter increments\r\n          or decrements on each edge of channel A, depending on which channel\r\n          leads the other. Each cycle results in two increments or decrements,\r\n          as shown in the following figure.\r\n      </p>\r\n      <img src=\"images/x2encoding.jpg\" alt=\"X2 Encoding\"/>\r\n      <h5>X4 Encoding</h5>\r\n      <p>\r\n          The counter increments or decrements similarly on each edge of\r\n          channels A and B for X4 encoding. Whether the counter increments\r\n            or decrements depends on which channel leads the other. Each cycle\r\n            results in four increments or decrements, as shown in this figure.\r\n      </p>\r\n      <img src=\"images/x4encoding.jpg\" alt=\"X4 Encoding\"/>\r\n      <h5>Finding the Rotational Position</h5>\r\n      <center>\r\n          <em>PulseCount * 360 / (xN)</em>\r\n      </center>\r\n      <p>x = encoding type</p>\r\n      <p>N = pulses per revolution</p>\r\n      <h5>Finding Linear Position</h5>\r\n      <center>\r\n          <em>PulseCount / (xN * PPI)</em>\r\n      </center>\r\n      <p>PPI = pulses per inch of linear movement</p>\r\n      <hr/>\r\n      <h3>V. Used Pins</h3>\r\n      <table border=\"1\">\r\n          <thead>\r\n              <tr>\r\n                  <th>chipKIT Pin</th>\r\n                  <th>Microcontroller Port</th>\r\n                  <th>Register</th>\r\n                  <th>Use</th>\r\n              </tr>\r\n          </thead>\r\n          <tbody>\r\n              <tr>\r\n                  <td>0</td>\r\n                  <td>UART1</td>\r\n                  <td>U1RX</td>\r\n                  <td>UART RX line from the computer</td>\r\n              </tr>\r\n              <tr>\r\n                  <td>1</td>\r\n                  <td>UART1</td>\r\n                  <td>U1TX</td>\r\n                  <td>UART TX line to the computer</td>\r\n              </tr>\r\n              <tr>\r\n                  <td>A0</td>\r\n                  <td>RB2</td>\r\n                  <td>CN4</td>\r\n                  <td>Motor Encoder Ch. A</td>\r\n              </tr>\r\n              <tr>\r\n                  <td>A6</td>\r\n                  <td>RB3</td>\r\n                  <td>CN5</td>\r\n                  <td>Motor Encoder Ch. B</td>\r\n              </tr>\r\n              <tr>\r\n                  <td>A1</td>\r\n                  <td>RB4</td>\r\n                  <td>CN6</td>\r\n                  <td>Pendulum Encoder Ch. A</td>\r\n              </tr>\r\n              <tr>\r\n                  <td>A7</td>\r\n                  <td>RB5</td>\r\n                  <td>CN7</td>\r\n                  <td>Pendulum Encoder Ch. B</td>\r\n              </tr>\r\n              <tr>\r\n                  <td>11</td>\r\n                  <td>RG8</td>\r\n                  <td>CN10</td>\r\n                  <td>Forward limit switch</td>\r\n              </tr>\r\n              <tr>\r\n                  <td>12</td>\r\n                  <td>RG7</td>\r\n                  <td>CN8</td>\r\n                  <td>Backward limit switch</td>\r\n              </tr>\r\n              <tr>\r\n                  <td>39</td>\r\n                  <td>UART2</td>\r\n                  <td>U2RX</td>\r\n                  <td>UART RX line from the motor controller</td>\r\n              </tr>\r\n              <tr>\r\n                  <td>40</td>\r\n                  <td>UART2</td>\r\n                  <td>U2TX</td>\r\n                  <td>UART TX line to the motor controller</td>\r\n              </tr>\r\n          </tbody>\r\n      </table>\r\n\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}